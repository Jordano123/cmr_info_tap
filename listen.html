<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Listen — CMR</title>
  <style>
    :root{ --accent:#2b6cb0; --muted:#6b7280; --card-bg:#fff; --page-bg:#f3f4f6; --radius:10px; --max-width:900px; --pad:20px; font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }
    body{ margin:0; background:var(--page-bg); color:#111827; display:flex; justify-content:center; padding:28px; }
    .wrap{ width:100%; max-width:var(--max-width); }
    .card{ background:var(--card-bg); border-radius:var(--radius); padding:var(--pad); box-shadow:0 6px 18px rgba(15,23,42,0.06); }
    .header{ display:flex; align-items:center; gap:12px; margin-bottom:12px; }
    .logo{ width:36px; height:36px; border-radius:8px; background:#111827; color:#fff; display:flex; align-items:center; justify-content:center; font-weight:700; }
    h1{ margin:0; font-size:20px; }
    p.sub{ margin:6px 0 18px 0; color:var(--muted); }
    .player{ display:flex; gap:18px; align-items:center; flex-wrap:wrap; }
    audio{ width:100%; max-width:520px; }
    .playlist{ margin-top:16px; display:flex; flex-direction:column; gap:10px; }
    .track{ padding:10px; border-radius:8px; background:#f8fafc; display:flex; justify-content:space-between; align-items:center; gap:12px; }
    .track .meta{ display:flex; flex-direction:column; }
    .btn{ padding:8px 12px; border-radius:8px; border:0; cursor:pointer; font-weight:700; color:#fff; background:var(--accent); }
    .back{ text-decoration:none; color:var(--accent); font-weight:700; display:inline-block; margin-bottom:12px; }
  </style>
  <link rel="stylesheet" href="cmr-brand.css">
</head>
<body>
  <div class="wrap">
    <a class="back" href="index.html">← Back to CMR Hub</a>
    <div class="card">
      <div class="header">
        <div class="logo">CMR</div>
        <div>
          <h1>Listen</h1>
          <p class="sub">Audio sermons and highlights. Click a track to play.</p>
        </div>
      </div>

      <div class="player">
        <audio id="audioPlayer" controls preload="none">
          <source id="audioSource" src="" type="audio/mpeg" />
          Your browser does not support the audio element.
        </audio>
        <div style="flex:1; min-width:220px;">
          <div id="nowPlaying" style="font-weight:700; margin-bottom:6px;">Now playing: —</div>
          <div id="nowDesc" style="color:var(--muted); font-size:14px;">Select a track from the list below.</div>
        </div>
      </div>

      <div class="playlist" id="playlist"></div>
    </div>
  </div>

  <script>
    // Simple playlist (replace with your own MP3 URLs and metadata)
    const playlist = [
      { title: "Sunday Sermon — Hope", src: "https://example.com/audio/sermon1.mp3", desc: "Pastor John Doe — 35 min" },
      { title: "Midweek Reflection — Prayer", src: "https://example.com/audio/sermon2.mp3", desc: "Pastor Jane Smith — 22 min" },
      { title: "Worship Highlights", src: "https://example.com/audio/worship.mp3", desc: "Worship team — 18 min" }
    ];

    const audio = document.getElementById('audioPlayer');
    const source = document.getElementById('audioSource');
    const playlistEl = document.getElementById('playlist');
    const nowPlaying = document.getElementById('nowPlaying');
    const nowDesc = document.getElementById('nowDesc');

    function renderPlaylist(){
      playlistEl.innerHTML = '';
      playlist.forEach((t, i) => {
        const tr = document.createElement('div');
        tr.className = 'track';
        const meta = document.createElement('div'); meta.className = 'meta';
        const title = document.createElement('div'); title.textContent = t.title; title.style.fontWeight = 700;
        const desc = document.createElement('div'); desc.textContent = t.desc; desc.style.color = 'var(--muted)'; desc.style.fontSize = '13px';
        meta.appendChild(title); meta.appendChild(desc);
        const btn = document.createElement('button'); btn.className = 'btn'; btn.textContent = 'Play';
        btn.onclick = () => playTrack(i);
        tr.appendChild(meta); tr.appendChild(btn);
        playlistEl.appendChild(tr);
      });
    }

    function playTrack(index){
      const t = playlist[index];
      if(!t) return;
      source.src = t.src;
      audio.load();
      audio.play().catch(()=>{});
      nowPlaying.textContent = 'Now playing: ' + t.title;
      nowDesc.textContent = t.desc;
    }

    document.addEventListener('DOMContentLoaded', () => {
      renderPlaylist();
    });
  </script>
</body>
</html>
