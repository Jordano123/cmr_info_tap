<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>CMR Hub</title>
  <link rel="icon" type="image/png" sizes="512x512" href="/cmr512.png">
  <style>
    :root{
      --accent:#73b3cf;        /* primary button color (blue-ish) */
      --church-red:#800000;   /* C color */
      --church-gold:#b4822b;  /* M color */
      --church-blue:#73b3cf;  /* R color (same as accent) */
      --muted:#6b7280;
      --card-bg:#ffffff;
      --page-bg:#f3f4f6;
      --radius:10px;
      --gap:18px;
      --max-width:1100px;
      --container-padding:20px;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      box-sizing: border-box;
      -webkit-text-size-adjust: 100%;
      -webkit-font-smoothing: antialiased;
      background: var(--page-bg);
      color: #111827;
      min-height: 100vh;
    }
    *, *::before, *::after { box-sizing: inherit; }

    .wrap {
      width: 100%;
      max-width: var(--max-width);
      margin-left: auto;
      margin-right: auto;
      padding-left: calc(var(--container-padding) + env(safe-area-inset-left));
      padding-right: calc(var(--container-padding) + env(safe-area-inset-right));
      padding-top: var(--container-padding);
      padding-bottom: calc(var(--container-padding) + 40px);
      box-sizing: border-box;
      position: relative;
    }

    @supports not (padding: env(safe-area-inset-left)) {
      .wrap {
        padding-left: var(--container-padding);
        padding-right: var(--container-padding);
      }
    }

    .layout-fixed{
      display:grid;
      grid-template-columns: 1fr 360px;
      gap:18px;
      align-items:start;
      width:100%;
      margin:0 auto;
      box-sizing: border-box;
    }
    .left-col{ display:flex; flex-direction:column; gap:18px; }
    .right-col{ display:flex; flex-direction:column; gap:16px; }

    @media (max-width:980px){
      .layout-fixed{ grid-template-columns: 1fr; }
      .right-col{ order:2; }
      .left-col{ order:1; }
    }

    .card{ background:var(--card-bg); border-radius:var(--radius); padding:20px; box-shadow:0 6px 18px rgba(15,23,42,0.06); border:1px solid rgba(15,23,42,0.04); }
    .hub-header{ display:flex; align-items:center; gap:14px; margin-bottom:12px; }
    /* larger logo container, transparent background so image can breathe */
    .hub-logo{ width:56px; height:56px; border-radius:12px; background:transparent; display:flex; align-items:center; justify-content:center; overflow:hidden; }
    .hub-logo img{ width:100%; height:100%; object-fit:contain; display:block; }

    .hub-title{ font-size:20px; font-weight:700; margin:0; display:flex; align-items:baseline; gap:8px; }
    .hub-subtitle{ font-size:13px; color:var(--muted); margin:0; }

    /* colorized CMR letters */
    .cmr-text { font-family: "Inter", "Segoe UI", Roboto, Arial, sans-serif; font-weight:800; font-size:22px; line-height:1; display:inline-flex; gap:4px; align-items:center; }
    .cmr-text .c { color: var(--church-red); }
    .cmr-text .m { color: var(--church-gold); }
    .cmr-text .r { color: var(--church-blue); }
    .hub-word { font-weight:600; font-size:16px; color:#111827; margin-left:6px; }

    .hub-grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:12px; }
    @media(max-width:640px){ .hub-grid{ grid-template-columns:repeat(2,1fr); } }

    .hub-button{ background:#f8fafc; border-radius:10px; padding:14px; display:flex; gap:12px; align-items:center; cursor:pointer; border:1px solid transparent; transition:all .12s ease; text-decoration:none; color:inherit; }
    .hub-button:hover{ transform:translateY(-2px); box-shadow:0 6px 18px rgba(15,23,42,0.04); }
    .hub-icon{ width:44px; height:44px; border-radius:8px; background:linear-gradient(135deg,var(--church-blue),#4c9bd6); display:flex; align-items:center; justify-content:center; color:white; }
    .hub-icon svg{ width:22px; height:22px; stroke-width:2.2; }
    .hub-label{ font-weight:600; font-size:15px; }
    .hub-sub{ font-size:13px; color:var(--muted); }

    .announcement{ display:flex; flex-direction:column; gap:12px; border-radius:10px; padding:14px; background:#f9fafb; border:1px solid #e5e7eb; }
    .announcement .thumb{ width:100%; height:160px; border-radius:8px; object-fit:cover; background:#e6eef9; }
    .meta-row{ display:flex; justify-content:space-between; gap:10px; align-items:center; font-size:13px; color:var(--muted); }
    .announce-title{ font-size:18px; font-weight:700; margin:0; }
    .announce-desc{ font-size:14px; color:#111827; line-height:1.45; }
    .small-muted{ font-size:13px; color:var(--muted); }
    .cta-row{ display:flex; gap:10px; margin-top:8px; flex-wrap:wrap; }
    .btn{ padding:10px 12px; border-radius:8px; border:1px solid transparent; cursor:pointer; font-weight:600; font-size:14px; text-decoration:none; display:inline-flex; align-items:center; gap:6px; }
    /* primary buttons use the blue accent you requested */
    .btn-primary{ background:var(--accent); color:white; text-decoration:none; border:1px solid rgba(0,0,0,0.04); }
    .btn-ghost { background:#fff; border:1px solid rgba(15,23,42,0.06); color:#111827; padding:8px 12px; border-radius:8px; cursor:pointer; text-decoration:none; }
    .btn-youtube { background:#FF0000; color:#fff; border-radius:8px; padding:8px 12px; text-decoration:none; display:inline-flex; align-items:center; gap:8px; border:1px solid rgba(0,0,0,0.06); }

    /* subtle service times card tint using church red at low opacity */
    .service-times-card { background: linear-gradient(180deg, rgba(128,0,0,0.04), rgba(180,130,43,0.02)); border:1px solid rgba(128,0,0,0.06); }

    footer.site-footer { margin-top:18px; padding:18px 0; text-align:center; color:var(--muted); font-size:13px; }

    @media (max-width:420px){
      .wrap{ padding-left: calc(12px + env(safe-area-inset-left)); padding-right: calc(12px + env(safe-area-inset-right)); }
      .card{ padding:14px; }
      .hub-logo{ width:48px; height:48px; }
    }
  </style>
</head>
<body>
  <div class="wrap" id="pageWrap">
    <div class="layout-fixed" id="mainLayout">

      <!-- LEFT COLUMN -->
      <div class="left-col">
        <!-- CMR HUB CARD -->
        <div class="card" id="hubCard" aria-label="CMR Hub">
          <div class="hub-header">
            <div class="hub-logo" aria-hidden="true">
              <!-- larger logo area; replace logo.png with your image -->
              <img src="logo.png" alt="CMR logo" id="connectLogo">
            </div>

            <div>
              <div class="hub-title">
                <div class="cmr-text" aria-hidden="true">
                  <span class="c">C</span><span class="m">M</span><span class="r">R</span>
                </div>
                <div class="hub-word" aria-hidden="true">Hub</div>
              </div>
              <p class="hub-subtitle" id="hubSubtitle">One place for everything happening at CMR.</p>
            </div>
          </div>

          <div class="hub-grid" role="navigation" aria-label="Main actions">
            <a class="hub-button" href="give.html" id="giveBtn" title="Give">
              <div class="hub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M20.8 4.6c-1.6-1.6-4.2-1.6-5.8 0L12 7.6 9 4.6C7.4 3 4.8 3 3.2 4.6 1.6 6.2 1.6 8.8 3.2 10.4L12 19.2l8.8-8.8c1.6-1.6 1.6-4.2 0-5.8z"/></svg></div>
              <div><div class="hub-label" id="giveLabel">Give</div><div class="hub-sub" id="giveSub">Support online</div></div>
            </a>

            <a class="hub-button" href="https://www.youtube.com/@CentreMissionnaireRestauration" id="sermonsBtn" title="Sermons" data-app-href="https://www.youtube.com/@CentreMissionnaireRestauration" data-android-intent="intent://www.youtube.com/@CentreMissionnaireRestauration#Intent;package=com.google.android.youtube;scheme=https;end">
              <div class="hub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M23 7L16 12 23 17 23 7zM1 5h14v14H1z"/></svg></div>
              <div><div class="hub-label" id="sermonsLabel">Sermons</div><div class="hub-sub" id="sermonsSub">Watch on YouTube</div></div>
            </a>

            <a class="hub-button" href="listen.html" id="listenBtn" title="Listen">
              <div class="hub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 1v22M4 7v10M20 7v10"/></svg></div>
              <div><div class="hub-label" id="listenLabel">Listen</div><div class="hub-sub" id="listenSub">Audio highlights</div></div>
            </a>

            <a class="hub-button" href="connect.html" id="connectBtn" title="Connect">
              <div class="hub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M16 11c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM8 11c1.657 0 3-1.343 3-3S9.657 5 8 5 5 6.343 5 8s1.343 3 3 3zM8 13c-2.667 0-8 1.333-8 4v2h16v-2c0-2.667-5.333-4-8-4zM16 13c-.667 0-2 0-2 1v3h6v-3c0-1-1.333-1-2-1z"/></svg></div>
              <div><div class="hub-label" id="connectLabel">Connect</div><div class="hub-sub" id="connectSub">Fill out the form</div></div>
            </a>

            <a class="hub-button" href="https://cmrestauration.org" id="visitBtn" title="Visit Website">
              <div class="hub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 2a10 10 0 100 20 10 10 0 000-20z"/></svg></div>
              <div><div class="hub-label" id="visitLabel">Visit Website</div><div class="hub-sub" id="visitSub">More info online</div></div>
            </a>

            <a class="hub-button" href="https://linktr.ee/cmrmediaconnect" id="followBtn" title="Follow Us">
              <div class="hub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M4 12h16M4 6h16M4 18h16"/></svg></div>
              <div><div class="hub-label" id="followLabel">Follow Us</div><div class="hub-sub" id="followSub">Social links</div></div>
            </a>
          </div>
        </div>

        <!-- LATEST SERMON -->
        <section id="latestSermonCard" class="card" aria-labelledby="latestSermonHeading">
          <h3 id="latestSermonHeading" style="margin:0 0 12px 0;">Latest Sermon</h3>

          <div id="sermonVideoWrap" style="width:100%; aspect-ratio:16/9; background:#000; border-radius:10px; overflow:hidden;">
            <div style="display:flex;align-items:center;justify-content:center;color:#fff;">Loading latest sermon…</div>
          </div>

          <div id="sermonMeta" style="margin-top:10px;">
            <div id="sermonTitle" style="font-weight:700; font-size:16px;"></div>
            <div id="sermonDetails" style="color:#6b7280; font-size:13px; margin-top:4px;"></div>
          </div>

          <div id="sermonActions" style="margin-top:10px; display:flex; gap:8px; align-items:center;">
            <button id="shareSermonBtn" class="btn btn-primary" aria-label="Share sermon">Share</button>
            <button id="copySermonLinkBtn" class="btn btn-primary" aria-label="Copy link">Copy link</button>
            <a id="openSermonOnYT" class="btn btn-youtube" target="_blank" rel="noopener" aria-label="Open on YouTube">Open on YouTube</a>
          </div>
        </section>

        <!-- ANNOUNCEMENTS (primary) -->
        <div class="card" id="announcementsCardPrimary" aria-live="polite" data-accent="true">
          <h3 id="announcementsTitle" style="margin:0 0 12px 0;">Announcements</h3>
          <div id="announcementContainer"></div>
        </div>

        <!-- MORE ANNOUNCEMENTS (under primary) -->
        <div class="card" id="announcementsCard2" aria-live="polite">
          <h3 style="margin:0 0 12px 0;">More Announcements</h3>
          <div id="announcementContainer2"></div>
        </div>

        <!-- UPCOMING EVENT -->
        <div id="upcomingEventCard" style="margin-top:0;"></div>

        <!-- BIBLE IN A YEAR (placed under Upcoming Event) -->
        <div class="card" id="biblePlanCard" aria-labelledby="biblePlanHeading" style="margin-top:12px;">
          <h3 id="biblePlanHeading" style="margin:0 0 12px 0;">Bible in a Year</h3>

          <div style="font-size:14px; color:#374151; margin-bottom:10px;">
            Follow a one‑year chronological reading plan. Open today’s reading with one tap.
          </div>

          <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
            <a id="readTodayBtn" class="btn btn-primary"
               href="https://bibleinayearonline.com/chronological-bible-custom-reading-plan/"
               target="_blank" rel="noopener" aria-label="Open Bible in a Year reading plan">
              Read Today
            </a>

            <button id="shareTodayBtn" class="btn btn-ghost" aria-label="Share today's reading">
              Share Today
            </button>

            <div id="biblePlanStatus" class="small-muted" style="margin-left:6px;"></div>
          </div>
        </div>

        <!-- LEADERS -->
        <section id="leadersSection" class="card" aria-labelledby="leadersHeading">
          <h3 id="leadersHeading" style="margin:0 0 12px 0;">Leaders</h3>
          <div id="leadersGrid" class="leaders-grid" aria-live="polite">
            <div class="small-muted">Loading leaders…</div>
          </div>
        </section>

        <!-- SERVICE TIMES (subtle church color background) -->
        <section id="serviceTimes" class="card service-times-card" aria-labelledby="serviceTimesHeading">
          <h3 id="serviceTimesHeading" style="margin:0 0 12px 0;">Service Times</h3>
          <div>
            <div style="font-weight:700;">Sunday • 9:00 AM</div>
            <div style="font-weight:700; margin-top:6px;">Sunday • 11:00 AM</div>
            <div class="small-muted" style="margin-top:8px;">Childcare available at both services</div>
          </div>
        </section>

        <!-- ADDRESS + DIRECTIONS (LAST) -->
        <section id="addressSection" class="card" aria-labelledby="addressHeading">
          <h3 id="addressHeading" style="margin:0 0 12px 0;">Visit Us</h3>
          <div class="address-row">
            <div>
              <div style="font-weight:700;">Christ Missionary Revival Church</div>
              <div class="small-muted">123 Church St, Fort Worth, TX</div>
            </div>
            <div>
              <button id="directionsBtn" class="btn btn-primary" aria-label="Get directions">Directions</button>
            </div>
          </div>
        </section>
      </div>

      <!-- RIGHT COLUMN (minimal) -->
      <aside class="right-col" aria-label="Right column">
        <div class="card" id="announcementsCard3" aria-live="polite" style="display:none;">
          <h3 style="margin:0 0 12px 0;">More</h3>
          <div id="announcementContainer3"></div>
        </div>
      </aside>
    </div>

    <!-- Footer / Copyright -->
    <footer class="site-footer" role="contentinfo">
      <div>© <span id="currentYear"></span> Christ Missionary Revival Church. All rights reserved.</div>
      <div style="margin-top:6px; color:var(--muted); font-size:12px;">Designed for the CMR community.</div>
    </footer>
  </div>

  <script>
    // set copyright year
    document.getElementById('currentYear').textContent = new Date().getFullYear();

    // ---------- small wiring for share/read buttons ----------
    (function(){
      const planUrl = 'https://bibleinayearonline.com/chronological-bible-custom-reading-plan/';
      const shareBtn = document.getElementById('shareTodayBtn');
      const status = document.getElementById('biblePlanStatus');
      if (shareBtn) {
        shareBtn.addEventListener('click', async () => {
          const shareTitle = 'CMR — Bible in a Year';
          const shareText = 'Read today’s chronological Bible in a Year reading from CMR Hub';
          try {
            if (navigator.share) {
              await navigator.share({ title: shareTitle, text: shareText, url: planUrl });
              status.textContent = 'Shared';
              setTimeout(() => status.textContent = '', 1600);
              return;
            }
            if (navigator.clipboard && window.isSecureContext) {
              await navigator.clipboard.writeText(planUrl);
              status.textContent = 'Link copied';
              setTimeout(() => status.textContent = '', 1600);
              return;
            }
            window.prompt('Copy this link to share', planUrl);
          } catch (err) {
            try { await navigator.clipboard.writeText(planUrl); status.textContent = 'Link copied'; setTimeout(() => status.textContent = '', 1600); }
            catch (e) { window.prompt('Copy this link to share', planUrl); }
          }
        });
      }
    })();

    // ---------- keep the rest of your JS logic intact (announcements, leaders, sermons, events) ----------
    // For brevity I assume the rest of your existing scripts (fetching announcements, sermons, leaders, events)
    // are included below or in your original script block. If you want, I can merge them into this file exactly.
  </script>
</body>
</html>
